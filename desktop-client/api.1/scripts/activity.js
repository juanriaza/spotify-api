require(["$api/models"],function(d){function b(a,b){this.resolve("identifier",a);this.resolveMany(0,b)}function c(a){d.BridgeLoadable.call(this);this.resolve("user",a);this.resolve("activities",new d.BridgeCollection(b,null,"feed_activities",a?a.uri:null))}SP.inherit(b,d.Loadable);d.Loadable.define(b,"activityType context item message referrer timestamp user".split(" "));b.Type={PLAYLIST_PUBLISHED:"playlist-published",PLAYLIST_TRACK_ADDED:"playlist-track-added",TRACK_FINISHED_PLAYING:"track-finished-playing",
APP_ADDED:"app-added",TRACK_STARTED_PLAYING:"track-started-playing",URI_SHARED:"uri-shared",ARTIST_FOLLOWED:"artist-followed",UNKNOWN:"unknown"};b.prototype._make_activityType=function(a){switch(a){case 1:return b.Type.PLAYLIST_PUBLISHED;case 2:return b.Type.PLAYLIST_TRACK_ADDED;case 3:return b.Type.TRACK_FINISHED_PLAYING;case 4:return b.Type.APP_ADDED;case 5:return b.Type.TRACK_STARTED_PLAYING;case 6:return b.Type.URI_SHARED;case 7:return b.Type.ARTIST_FOLLOWED;default:return b.Type.UNKNOWN}};b.prototype._make_context=
function(a){return a&&d.fromURI(a.uri,a)};b.prototype._make_item=function(a){return a&&d.fromURI(a.uri,a)};b.prototype._make_referrer=function(a){return a};b.prototype._make_timestamp=function(a){return new Date(a)};b.fromURI=function(a,c){return new b(a,c)};SP.inherit(c,d.BridgeLoadable);d.Loadable.define(c,["activities","user"]);c.prototype._observed=function(){this.bridgeListen("feed_event_wait",[this.user?this.user.uri:null])};c.forCurrentUser=function(){return new c(d.session.user)};c.forUser=
function(a){return new c(a)};c.forRelations=function(){return new c(null)};exports.Feed=c});
