require(["$api/models","$api/../vendor/js-yaml.min"],function(c,g){function e(a,b,d){c.Loadable.call(this);this.resolve("level",d);this.resolve("message",b);this.resolve("timestamp",new Date(a))}function d(a){c.BridgeLoadable.call(this);this.resolve("application",a);this.resolve("entries",new c.BridgeCollection(e,a.uri,"log_entries"));this.bridgeListen("log_event_wait",[a.uri])}g=window.jsyaml;SP.inherit(e,c.Loadable);c.Loadable.define(e,["level","message","timestamp"]);e.fromURI=function(a,b){return new e(b.timestamp,
b.message,b.level)};SP.inherit(d,c.BridgeLoadable);c.Loadable.define(d,["application","entries"]);d.forApplication=function(a){return new d(a)};d.forCurrentApplication=function(){return new d(c.application)};exports.require=function(a,b,c){for(var d=[],e=[],h=0,g=a.length;h<g;h++){var i=a[h],f;f=(f=i.match(/^(\$([^\/]+)\/)/))?f[2]:void 0;if(!f)throw Error("Empty module name in require.");d.push(f);var j=f.split("@");e.push(i.replace(f,j[0]))}SP.request("application_require",d,this,function(){window.require(e,
b)},function(b){console.error("Error requiring modules",b,a);if(c)c(b);else throw Error("Error requiring modules: "+a.join(", "));})};exports.isRequestImplemented=function(a){var b=new c.Promise;SP.request("core_request_lookup",[a],this,function(a){b.setDone(a.found)},function(){b.setFail()});return b};exports.getBridgeDefinition=function(){var a=new c.Promise;c.application.readFile("$api/bridge/requests.yaml").done(function(b){a.setDone(g.load(b))}).fail(function(){a.setFail()});return a};exports.Log=
d});
