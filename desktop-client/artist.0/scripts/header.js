require("$api/models $views/buttons#StartRadioButton $views/buttons#ShareButton $views/buttons#CustomButton $views/image#Image /scripts/utils /scripts/follow#FollowHandler /scripts/logger /scripts/env#Environment /scripts/config#Config /strings/main.lang".split(" "),function(g,j,k,l,m,c,n,p,q,r,h){var d=new p.Logger,i=h.get.bind(h),c=function(a){this.artist=void 0;this.toolbar=a;this.view=new b(a);this.follow=new n};c.prototype.init=function(a){this.artist=a;this.follow.init(this.artist);this.clear()};
c.prototype.destroy=function(){this.view.destroy();this.follow.view.clearFollowerCount();delete this.artist};c.prototype.clear=function(){this.view.clear()};c.prototype.render=function(){g.Profile.fromURI(this.artist.uri).load("image","name").done(this,function(a){this.view.setArtistName(a.name,this.artist.uri.toSpotifyURL());this.view.setArtistPortrait(a)});q.desktop||r.get("release").has("domino")?(this.artist.load("user").done(this,function(){this.artist.user&&this.artist.user.uri&&(this.view.setMergedState(),
this.view.renderMergedBadge(),this.view.renderMergedProfileLink(this.artist))}),this.view.createShareButton(this.artist),this.follow.render()):$("artist-buttons-follow").dispose();this.view.createArtistRadio(this.artist)};var b=function(a){this.toolbar=a};b.prototype.clear=function(){$("artist-buttons").innerHTML='<span id="artist-buttons-follow"></span>'};b.prototype.setMergedState=function(){$("artist-page").addClass("verified")};b.prototype.renderMergedBadge=function(){var a=$("artist-name"),e=
document.createElement("span");e.className="artist-badge";e.title=i("verified-artist");a.grab(e)};b.prototype.renderMergedProfileLink=function(a){var e=$("view-profile-wrapper"),b=l.withClass("view-profile-link",i("view-spotify-profile"));b.addEventListener("click",function(){d.clientEvent("view-profile");g.application.openURI(a.user.uri.toSpotifyLink())});e.appendChild(b.node)};b.prototype.setArtistName=function(a,b){var c=this,d=$("artist-name"),f=document.createElement("a");f.href=b;f.innerHTML=
a;f.addEventListener("click",function(a){c.toolbar.show("overview");a.preventDefault()});d.grab(f,"top")};b.prototype.setArtistPortrait=function(a){var b=this,c=$("artist-image"),a=new m(a,{height:128,width:128,animate:!1,placeholder:"artist",style:"none"});c.innerHTML="";c.appendChild(a.node);a.node.addEventListener("click",function(){b.toolbar.show("overview")})};b.prototype.createArtistRadio=function(a){var b=$("artist-buttons"),a=j.forArtist(a);a.node.addEventListener("click",function(){d.clientEvent("start-radio")});
b.appendChild(a.node)};b.prototype.createShareButton=function(a){var b=$("artist-buttons"),a=k.forArtist(a);a.node.addEventListener("click",function(){d.clientEvent("share-artist")});b.appendChild(a.node)};b.prototype.destroy=function(){$("artist-image").empty();$("artist-name").empty();$("artist-buttons").empty();$("artist-page").removeClass("verified");$("artist-badge")&&$("artist-badge").dispose();$("view-profile-wrapper").empty()};exports.Header=c});
