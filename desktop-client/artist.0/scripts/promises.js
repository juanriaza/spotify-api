require(["$api/models#Promise"],function(f){function a(a,b){this._promise=new f(a);var d=this;this._timer=window.setTimeout(function(){d.setDone()},b);return this._promise}a.prototype.setDone=function(){this._timer&&window.clearTimeout(this._timer);this._promise.setDone()};a.prototype.setFail=function(){this._timer&&window.clearTimeout(this._timer);this._promise.setFail()};exports.TimedPromise=a;exports.ChainedGeneratedPromise=function(a,b,d,g){this._promise=new f(b);this._timesLeft=d;var c=this,
e=function(){if(0==c._timesLeft)c._promise.setDone();else{c._timesLeft--;var b=a.call(null!==g?g:c);b?(b.done(e),b.fail(e)):c._promise.setDone()}};window.setTimeout(e,0);return this._promise}});
