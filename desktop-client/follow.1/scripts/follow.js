require("$api/models $views/image#Image scripts/suggestionsource#SuggestionSource scripts/widgets/countmodule#CountModule scripts/widgets/suggestionsmodule#SuggestionsModule strings/follow.lang".split(" "),function(j,m,n,p,q,l){function g(e,b){j.application.clientEvent("PeopleApp",e,"2","",b)}function i(){j.Observable.call(this)}var k=SP.bind(l.get,l);SP.inherit(i,j.Observable);i.prototype.addCount=function(e,b,c){var d=new p(e,k(b));d.addEventListener("navigate",function(a){g("SectionNavigate",{section:d.sectionId,
link:a.href,unit:a.index})});d.load(c);this.getNode();this._header.appendChild(d.getNode())};i.prototype.addSuggestions=function(e,b,c,d,a,h){var a=new n(a,h),f=new q(a,d,e,k(b),k(c));f.addEventListener("dismiss",function(a){g("SectionDismiss",{section:f.sectionId,unit:a.index,user:a.user.uri})});f.addEventListener("navigate",function(a){g("SectionNavigate",{section:f.sectionId,link:a.href,unit:a.index})});f.addEventListener("refresh",function(){g("SectionRefresh",{section:f.sectionId})});f.addEventListener("subscribe",
function(a){g("SectionSubscribe",{section:f.sectionId,unit:a.index,user:a.user.uri})});this.getNode().appendChild(f.getNode())};i.prototype.getNode=function(){if(this._node)return this._node;var e=document.createElement("div");e.id="follow";var b=j.session.user,c=document.createElement("header");e.appendChild(c);var d=document.createElement("div");d.className="container";c.appendChild(d);c=document.createElement("div");c.id="current-user";var a=m.forUser(b,{link:b.uri,width:50,height:50});a.addEventListener("click",
function(){g("ViewProfile",{clicked:"image"})});c.appendChild(a.node);var h=document.createElement("a");h.className="title";h.href=b.uri;h.addEventListener("click",function(){g("ViewProfile",{clicked:"text"})});c.appendChild(h);a=document.createElement("a");a.textContent=k("ViewProfile");a.href=b.uri;a.addEventListener("click",function(){g("ViewProfile",{clicked:"text"})});c.appendChild(a);d.appendChild(c);b.load("name").done(function(){h.textContent=b.name.decodeForText()});this._header=d;return this._node=
e};exports.FollowApp=i});
