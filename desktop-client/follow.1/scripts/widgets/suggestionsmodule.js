require("$api/models $shared/events#EventHandler $views/buttons#CustomButton $views/utils/css scripts/widgets/suggestiongrid#SuggestionGrid strings/follow.lang".split(" "),function(g,i,j,f,k,h){function c(b,a,d,f,e){g.Observable.call(this);this.source=b;this.numSuggestions=a;this.sectionId=d;this.title=f;this.emptyText=e;this._eventHandler=new i(this)}var l=SP.bind(h.get,h);SP.inherit(c,g.Observable);c.prototype.dispose=function(){this._node&&(this._eventHandler.removeAll(),this._suggestions.dispose(),
this._node.parentNode&&this._node.parentNode.removeChild(this._node),delete this._eventHandler,delete this._suggestions,delete this._node)};c.prototype.getNode=function(){if(this._node)return this._node;var b=document.createElement("section");b.className="loading suggestions";b.id=this.sectionId;var a=new k(this.source,this.numSuggestions),d=document.createElement("h1");d.className="header";b.appendChild(d);var c=document.createElement("span");c.className="container";c.textContent=this.title;d.appendChild(c);
var e=j.withClass("refresh",l("Refresh"));e.setIconClass("icon");c.appendChild(e.node);this._eventHandler.listen(e.node,"click",function(){!f.hasClass(e.node,"clicked")&&this.dispatchEvent("refresh")&&(f.addClass(e.node,"clicked"),a.refresh(),setTimeout(function(){f.removeClass(e.node,"clicked")},600))}).listen(a,"subscribe",this.dispatchEvent).listen(a,"dismiss",this.dispatchEvent).listen(a,"navigate",this.dispatchEvent).listen(a,"sourcechange",function(){e.node.style.visibility=a.moreAvailable()?
"visible":"hidden";f.removeClass(b,"loading")}).listen(a,"displaycountchange",function(a){a.displayCount?f.removeClass(b,"empty"):f.addClass(b,"empty")});b.appendChild(a.getNode());d=document.createElement("p");d.className="empty container";d.textContent=this.emptyText;b.appendChild(d);this._suggestions=a;return this._node=b};exports.SuggestionsModule=c});
