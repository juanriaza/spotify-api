require(["$views/utils/css"],function(e){var g={items:{},categories:{},overViewPane:null,isGlobalInspector:/^sp:/.test(document.location),init:function(){if(this.isGlobalInspector){if(!WebInspector.panels)return setTimeout(function(){g.init()},100);this.timelinePanel=WebInspector.panels.timeline;this.overViewPane=this.timelinePanel._overviewPane;this.createBase();this.setupEvents()}},setupEvents:function(){var a=this;window.addEventListener("app-category-add",function(b){a.onCategoryAddEvent(b.detail)})},
onCategoryAddEvent:function(a){a.app.id in this.items||(this.createAppItem(a.app),this.categories[a.app.id]=a.category,this.setItemColor(a.app))},createBase:function(){var a=document.getElementById("inspector-wrapper");e.addClass(a,"global");a=document.createElement("div");a.setAttribute("id","appfilter");document.body.appendChild(a);var b=document.createElement("h2");b.className="sidebar-tree-section";b.innerHTML="APPS";a.appendChild(b);b=document.createElement("ul");e.addClass(b,"applist");a.appendChild(b);
this.list=b},createAppItem:function(a){var b=this,c=document.createElement("li");c.className="checked";c.setAttribute("data-app-id",a.id);this.items[a.id]=c;var d=document.createElement("input");d.className="checkbox";d.type="checkbox";d.checked=!0;d.addEventListener("change",function(){b.onCheckboxChange(d.checked,c)});var e=document.createElement("div");e.className="color";var f=document.createElement("div");f.className="appname";f.innerHTML=a.name+" <small>("+a.instance+")</small>";f.addEventListener("click",
function(){b.onNameClick(d,c)});c.appendChild(d);c.appendChild(e);c.appendChild(f);this.list.appendChild(c)},setItemColor:function(a){var b=this.categories[a.id];if(a=this.items[a.id].querySelector(".color"))a.style.backgroundImage="-webkit-linear-gradient(top, "+b.fillColorStop1+", "+b.borderColor+")"},onCheckboxChange:function(a,b){e[a?"addClass":"removeClass"](b,"checked");var c=b.getAttribute("data-app-id");this.filterCategory(this.categories[c],a)},onNameClick:function(a,b){a.checked=!a.checked;
this.onCheckboxChange(a.checked,b)},filterCategory:function(a,b){a.hidden=!b;this.timelinePanel._scheduleRefresh(!0)}};g.init()});
