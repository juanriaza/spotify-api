require("$api/devtools",function(e){function j(a,b){var c=a.instance.match(/spotify:instance:(.*?):(\d+)/),f=c[1],c=c[2];return{isGlobalInspector:/^sp:/.test(document.location),startTime:1E3*a.start,endTime:1E3*a.end,type:b,context:a.context,app:{id:f+"--"+c,identifier:f,name:f,instance:c},stackTrace:a.stacktrace,data:{url:(a.stacktrace[0]||{url:""}).url}}}function g(a,b,c,f){for(var d=b.stacktrace,e=!1,g=[],h=0,i=d.length;h<i;h++)e?g.push(d[h]):e="SpotifyApi.analyticsContext"==d[h].functionName;
b.stacktrace=g;a=j(b,a);a.data.contextName=c;a.data.id=f;return a}function i(a){var b=JSON.parse(a.args),b={id:b[0],name:b[1]};b.data=a;return b}function m(a){a=a.data;if("core_context_begin"===a.name){var b=i(a),a=g("SpotifyAppContextBegin",a,b.name,b.id);if(a.isGlobalInspector)return}else if("core_context_end"===a.name){if(b=i(a),a=g("SpotifyAppContextEnd",a,b.name,b.id),a.isGlobalInspector)return}else b=j(a,"SpotifyAPIRequest"),b.data.requestName=a.name,b.data.arguments=a.args,a=b;WebInspector.timelineManager._dispatcher.eventRecorded(a)}
function n(){d.toggleTimelineButton.toggled?e.enableProfiling(m):e.disableProfiling()}function k(){d=WebInspector.panels.timeline;d.toggleTimelineButton.addEventListener("click",n,this);if(/^sp:/.test(document.location)){var a=document.createElement("style");a.innerHTML="#toolbar, button.dock-status-bar-item,        button.console-status-bar-item, button.settings-status-bar-item,        button.garbage-collect-status-bar-item {display: none;} #main {top: 0}";document.head.appendChild(a)}WebInspector.toolbar._updateDropdownButtonAndHideDropdown();
WebInspector.inspectorView.setCurrentPanel(WebInspector.panels.timeline)}var d;if(WebInspector.panels)k();else{var l=InspectorFrontendAPI.loadCompleted;if(!l)throw Error("Unable to install profiling hook");InspectorFrontendAPI.loadCompleted=function(){l();k()}}});
