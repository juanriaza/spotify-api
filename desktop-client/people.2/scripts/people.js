require("$api/models $views/image#Image scripts/suggestionsource#SuggestionSource scripts/widgets/countmodule#CountModule scripts/widgets/suggestionsmodule#SuggestionsModule strings/people.lang".split(" "),function(i,l,m,n,p,k){function g(e,a){i.application.clientEvent("PeopleApp",e,"2","",a)}function h(){i.Observable.call(this)}var j=SP.bind(k.get,k);SP.inherit(h,i.Observable);h.prototype.addCount=function(e,a,d){var c=new n(e,j(a));c.addEventListener("navigate",function(a){g("SectionNavigate",{section:c.sectionId,
link:a.href,unit:a.index})});c.load(d);this.getNode();this._header.appendChild(c.getNode())};h.prototype.addSuggestions=function(e,a,d,c,f){var c=new m(c),b=new p(c,f,e,j(a),j(d));b.addEventListener("dismiss",function(a){g("SectionDismiss",{section:b.sectionId,unit:a.index,user:a.user.uri})});b.addEventListener("navigate",function(a){g("SectionNavigate",{section:b.sectionId,link:a.href,unit:a.index})});b.addEventListener("refresh",function(){g("SectionRefresh",{section:b.sectionId})});b.addEventListener("subscribe",
function(a){g("SectionSubscribe",{section:b.sectionId,unit:a.index,user:a.user.uri})});this.getNode().appendChild(b.getNode())};h.prototype.getNode=function(){if(this._node)return this._node;var e=document.createElement("div");e.id="people";var a=i.session.user,d=document.createElement("header");e.appendChild(d);var c=document.createElement("div");c.className="container";d.appendChild(c);d=document.createElement("div");d.id="current-user";var f=l.forUser(a,{link:a.uri,width:50,height:50});f.addEventListener("click",
function(){g("ViewProfile",{clicked:"image"})});d.appendChild(f.node);var b=document.createElement("a");b.className="title";b.href=a.uri;b.addEventListener("click",function(){g("ViewProfile",{clicked:"text"})});d.appendChild(b);f=document.createElement("a");f.textContent=j("ViewProfile");f.href=a.uri;f.addEventListener("click",function(){g("ViewProfile",{clicked:"text"})});d.appendChild(f);c.appendChild(d);a.load("name").done(function(){b.textContent=a.name.decodeForText()});this._header=c;return this._node=
e};exports.PeopleApp=h});
