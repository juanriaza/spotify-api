require(["$api/models","scripts/profile","scripts/template.slab#templates","$views/utils/css","strings/main.lang"],function(e,f,h,i,n){var d=null,g=null,c=null,j=document.querySelector("body"),k=function(){i.removeClass(j,"offline");e.session.load("user","device","online").done(p)},p=function(a){c=a;!1===c.online?(i.addClass(j,"offline"),document.querySelector(".offline-message").innerHTML=h.offline({offlineMessage:n.get("offlineMessage")}),c.addEventListener("change:online",k)):c.user.load("name",
"username","uri").done(q)},q=function(a){g=a;e.application.addEventListener("arguments",l);e.application.load("arguments").done(l)},l=function(){var a;a:{var b=e.application.arguments;if("desktop"===c.device){if(2>b.length||"user"!==b[0]){a=null;break a}a=b[1].decodeForText()}else if("web"===c.device)if(b[0])a=b[0].decodeForText();else{e.application.openURI("spotify:user:"+g.username);a=void 0;break a}}b=r();a&&" "!==a.charAt(0)?d&&d.user&&d.user.username===a?d.switchView(b):m(a,b):m("",b)},r=function(){var a=
e.application.arguments,b;if("web"===c.device&&2>a.length||"desktop"===c.device&&3>a.length)return f.Views.OVERVIEW;"web"===c.device?b=a[1]:"desktop"===c.device&&(b=a[2]);switch(b.decodeForText()){case "followers":return f.Views.FOLLOWERS;case "following":return f.Views.FOLLOWING;default:return f.Views.OVERVIEW}},m=function(a,b){d&&d.dispose();d=new f.Profile;d.load(a,g,b,h,c)};k()});
