exports.ImageCarousel=ImageCarousel;var dom=sp.require("$util/dom"),r=sp.require("$util/react"),lang=sp.require("$util/language"),util=sp.require("sp://radio/scripts/util"),catalog=lang.loadCatalog("$resources/cef_views");
function ImageCarousel(p,q){var e=15,f=4,c=null,h=null,i=0,l=0,j=this;this.addItem=function(a,b,d,c){var k=dom.Element("li"),f=-1!==a.indexOf("artist")?"img/128-artist.png":"sp://resources/img/placeholders/300-album.png",g="",g=-1!==a.indexOf("spotify:track")?lang.format(lang.getString(catalog,"Misc","Item by artists"),c[0].name,d.name):d.name,a=(new util.SPImage(""==b?f:b,a,g)).node;a.style.display="block";a.appendChild(dom.Element("div"));k.appendChild(a);a=dom.Element("div",{className:"imageCarouselTitle"});
k.appendChild(a);b=dom.Element("a",{className:"outgoing main",text:d.name.decodeForText(),href:d.link});""==d.link&&(b.style.pointerEvents="none",b.style.cursor="default");a.appendChild(b);a.appendChild(dom.Element("br"));for(d=0;d<c.length;d++)b=c[d],b=dom.Element("a",{className:"outgoing",text:b.name.decodeForText(),href:b.link}),a.appendChild(b),a.appendChild(dom.Element("br"));k.style.paddingLeft=k.style.paddingRight=e+"px";h.appendChild(k);i++;h.style.width=i*(125+2*e)+"px"};this.scrollTo=function(a){function b(a,
b){var e=dom.queryOne(a,c);e.className=b?e.className+" disabled":e.className.replace(/ disabled/g,"")}a>i-f&&(a=i-f);0>a&&(a=0);b(".imageCarouselPrev",0==a);b(".imageCarouselNext",a>=i-f);h.style.marginLeft="-"+a*(125+2*e)+"px";l=a};this.clear=function(){for(var a=dom.query("li",h),b=0;b<a.length;b++)dom.destroy(a[b]);i=0};this.handleResize=function(){var a=parseInt(window.getComputedStyle(c).width.replace("px",""));f=Math.floor(a/155);e=Math.floor((a/f-125)/2);for(var b=dom.query("li",c),d=0;d<b.length;d++)b[d].style.paddingLeft=
b[d].style.paddingRight=e+"px";dom.queryOne(".imageCarouselTitle",c).style.paddingLeft=e+"px";dom.queryOne(".imageCarouselTitle",c).style.width=a-2*e-50+"px";dom.queryOne(".imageCarouselPagination",c).style.paddingRight=e+"px";h.style.width=i*(125+2*e)+"px";j.scrollTo(l)};r.fromDOMEvent(window,"resize").subscribe(j.handleResize);c=dom.Element("div",{className:"imageCarouselWrapper"});dom.queryOne(p).appendChild(c);c.appendChild(dom.Element("h2",{className:"imageCarouselTitle",innerHTML:q}));var g=
dom.Element("div",{className:"imageCarouselPagination"});c.appendChild(g);var m=dom.Element("div",{className:"imageCarouselPrev disabled"});g.appendChild(m);var n=dom.Element("div",{className:"imageCarouselNext disabled"});g.appendChild(n);r.fromDOMEvent(m,"click").subscribe(function(){j.scrollTo(l-f)});r.fromDOMEvent(n,"click").subscribe(function(){j.scrollTo(l+f)});g=dom.Element("div",{className:"imageCarousel"});c.appendChild(g);h=dom.Element("ul");g.appendChild(h);j.handleResize()};
