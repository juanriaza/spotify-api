exports.ImageCarousel=ImageCarousel;var dom=sp.require("$util/dom"),r=sp.require("$util/react"),lang=sp.require("$util/language"),util=sp.require("sp://radio/scripts/util"),strings={},_=function(f){return f in strings?strings[f]:f};exports.setStrings=function(f){strings=f};
function ImageCarousel(f,q){var g=15,d=4,c=null,h=null,i=0,m=0,k=this;this.addItem=function(a,b,e,c){var l=dom.Element("li"),f=-1!==a.indexOf("artist")?"img/128-artist.png":"sp://resources/img/placeholders/300-album.png",d="",d=-1!==a.indexOf("spotify:track")?lang.format(_("Item by artists"),c[0].name,e.name):e.name,a=(new util.SPImage(""==b?f:b,a,d)).node;a.style.display="block";a.appendChild(dom.Element("div"));l.appendChild(a);a=dom.Element("div",{className:"imageCarouselTitle"});l.appendChild(a);
b=dom.Element("a",{className:"outgoing main",text:e.name.decodeForText(),href:e.link});""==e.link&&(b.style.pointerEvents="none",b.style.cursor="default");a.appendChild(b);a.appendChild(dom.Element("br"));for(e=0;e<c.length;e++)b=c[e],b=dom.Element("a",{className:"outgoing",text:b.name.decodeForText(),href:b.link}),a.appendChild(b),a.appendChild(dom.Element("br"));l.style.paddingLeft=l.style.paddingRight=g+"px";h.appendChild(l);i++;h.style.width=i*(125+2*g)+"px"};this.scrollTo=function(a){function b(a,
b){var d=dom.queryOne(a,c);d.className=b?d.className+" disabled":d.className.replace(/ disabled/g,"")}a>i-d&&(a=i-d);0>a&&(a=0);b(".imageCarouselPrev",0==a);b(".imageCarouselNext",a>=i-d);h.style.marginLeft="-"+a*(125+2*g)+"px";m=a};this.clear=function(){for(var a=dom.query("li",h),b=0;b<a.length;b++)dom.destroy(a[b]);i=0};this.handleResize=function(){var a=parseInt(window.getComputedStyle(c).width.replace("px",""));d=Math.floor(a/155);g=Math.floor((a/d-125)/2);for(var b=dom.query("li",c),e=0;e<b.length;e++)b[e].style.paddingLeft=
b[e].style.paddingRight=g+"px";dom.queryOne(".imageCarouselTitle",c).style.paddingLeft=g+"px";dom.queryOne(".imageCarouselTitle",c).style.width=a-2*g-50+"px";dom.queryOne(".imageCarouselPagination",c).style.paddingRight=g+"px";h.style.width=i*(125+2*g)+"px";k.scrollTo(m)};r.fromDOMEvent(window,"resize").subscribe(k.handleResize);c=dom.Element("div",{className:"imageCarouselWrapper"});dom.queryOne(f).appendChild(c);c.appendChild(dom.Element("h2",{className:"imageCarouselTitle",innerHTML:q}));var j=
dom.Element("div",{className:"imageCarouselPagination"});c.appendChild(j);var n=dom.Element("div",{className:"imageCarouselPrev disabled"});j.appendChild(n);var p=dom.Element("div",{className:"imageCarouselNext disabled"});j.appendChild(p);r.fromDOMEvent(n,"click").subscribe(function(){k.scrollTo(m-d)});r.fromDOMEvent(p,"click").subscribe(function(){k.scrollTo(m+d)});j=dom.Element("div",{className:"imageCarousel"});c.appendChild(j);h=dom.Element("ul");j.appendChild(h);k.handleResize()};
