require(["scripts/config","scripts/env#Environment"],function(h,l){var d=exports;Array.prototype.max=function(){return Math.max.apply(null,this)};Array.prototype.min=function(){return Math.min.apply(null,this)};Array.prototype.sum=function(){var a=0,c=this.length;if(c)for(;c--;)a+=this[c];return a};d.getScrollTop=function(){if("undefined"!==typeof window.pageYOffset)return window.pageYOffset;var a=document.body,c=document.documentElement,c=c.clientHeight?c:a;return c.scrollTop};d.areArgumentsOK=function(a){var c=
a.length;if(0===c)return!1;for(var b=0;b<c;b+=1)if("undefined"===typeof a[b]||a[b]&&300<a[b].length)return!1;return!0};d.isCategoryProper=function(a){return"undefined"!==typeof a&&-1!==h.CATEGORIES.indexOf(a)};d.getWireframe=function(a,c){var b=[],g,e,f=d.getOrder();g=0;for(e=f.length;g<e;g+=1)b.push(c[f[g]]);if(1>a||0===b.length)return[];if(4===b.length)return b[0]+b[1]>=a&&b[2]+b[3]>=a?[[1,1],[1,1]]:b[0]+b[1]+b[2]>=a&&b[3]>=a?[[1,1,1],[1]]:[[1,1,1,1]];if(3===b.length)return b[0]+b[1]>=a&&b[2]>=
a?[[1,1],[1]]:[[1,1,1]];if(2===b.length)return[[1,1]];if(1===b.length)return[[1]];var f=[],i=[];g=0;for(e=b.length;g<e;g+=1)i.push(1);f[0]=i;return f};d.getSpliceStructure=function(a,c){for(var b=d.getOrder(),g=d.getWireframe(a,c),e,f=0,i=[],h=[],j=0,k=g.length;j<k;j+=1){for(var h=[],m=0,l=g[j].length;m<l;m+=1)e=b[f],h.push(c[e]),f+=1;i.append(d.trimOrFill(a,h))}return i};d.spliceData=function(a,c){for(var b,d=0,e={},f=0,i=h.ORDER.length;f<i;f+=1)b=h.ORDER[f],a.hasOwnProperty(b)&&(e[b]=a[b].splice(0,
c[d++]));return e};d.trimOrFill=function(a,c){var b=c.sum();return b>a?d.trim(a,c):b<a?d.fill(a,c):c};d.trim=function(a,c){for(var b=c.max();c.sum()>a;)c[c.lastIndexOf(b)]-=1,b=c.max();return c};d.fill=function(a,c){for(var b=c.min();c.sum()<a;)c[c.lastIndexOf(b)]+=1,b=c.min();return c};d.getWidth=function(){return window.innerWidth-40};d.getHref=function(a){a="spotify:search:"+encodeURIComponent(a);return a=l.web?a.toSpotifyURL():a.replace(/%20/g,"+").replace(/%3A/g,":")};d.getURIs=function(a){for(var c=
[],b=0,d=a.length;b<d;b+=1)c.push(a[b].get("data-uri"));return c};d.removeAlreadyDisplayedData=function(a){Object.keys(a);var c,b,g={},e;for(e in a)if(a.hasOwnProperty(e)){c=document.getElement("."+e+" ul").getChildren();c=d.getURIs(c);for(b=a[e].length;b--;)-1!==c.indexOf(a[e][b].uri)&&a[e].splice(b,1);g[e]=a[e]}return g};d.fixImageURL=function(a){var c;"undefined"!==typeof a.image&&("undefined"!==typeof a.image.url&&null!==a.image.url?c=a.image.url:"undefined"!==typeof a.image.spotify_uri&&null!==
a.image.spotify_uri&&(c=a.image.spotify_uri));return c};d.getAmountOfObjectsFromDOM=function(){for(var a={},c=[],b,d,e=0,f=h.ORDER.length;e<f;e+=1)b=h.ORDER[e],d=document.getElement("."+b+" ul"),null!==d&&(a[b]=d.children.length,c.push(b));return{obj:a,order:c}};d.getOrder=function(){return d.getAmountOfObjectsFromDOM().order};d.getLengthOfData=function(a){var c={},b;for(b in a)c[b]=a[b].length;return c};d.trimData=function(a,c){var b=d.getSpliceStructure(a,d.getLengthOfData(c));return d.spliceData(c,
b)};d.isSimpleEqual=function(a,c){for(var b in a)if(!c.hasOwnProperty(b)||a[b]!==c[b])return!1;return!0};var n=this.typeOf=function(a){if(null==a)return"null";if(null!=a.$family)return a.$family();if(a.nodeName){if(1==a.nodeType)return"element";if(3==a.nodeType)return/\S/.test(a.nodeValue)?"textnode":"whitespace"}else if("number"==typeof a.length){if(a.callee)return"arguments";if("item"in a)return"collection"}return typeof a},k=function(a){switch(n(a)){case "array":return a.clone();case "object":return d.clone(a);
default:return a}};d.clone=function(a){var c={},b;for(b in a)c[b]=k(a[b]);return c};Array.prototype.clone=function(){for(var a=this.length,c=Array(a);a--;)c[a]=k(this[a]);return c};Array.prototype.$family=function(){return"array"}});
