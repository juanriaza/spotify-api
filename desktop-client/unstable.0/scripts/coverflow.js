var sp=getSpotifyApi();exports.Coverflow=Coverflow;var dom=sp.require("$util/dom"),util=sp.require("$util/util");function Coverflow(a,b){this.datasource=a;this._itemCount=this.datasource.count();this.options=util.merge({},{itemCount:this._itemCount},b||{});_build.call(this)}
function _build(){this.node=new dom.Element("ul",{className:"sp-coverflow"});for(var a=0,b=this.options.itemCount;a<b;a++){var d=this.datasource.makeNode(a);d.dataset.offset=a-2;dom.adopt(this.node,d);dom.listen(d,"click",coverClickHandler)}}function coverClickHandler(a){var b=this.parentNode.childNodes,d=Number(this.dataset.offset);0!==d&&a.preventDefault();for(var a=0,e=b.length;a<e;a++){var c=Number(b[a].dataset.offset)-d;-2>c?c+=5:2<c&&(c-=5);b[a].dataset.offset=c}};
