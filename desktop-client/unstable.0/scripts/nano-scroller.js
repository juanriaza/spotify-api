exports.scroller=nanoScroller;var DOMSCROLL,DOWN,DRAG,MOUSEDOWN,MOUSEMOVE,MOUSEUP,MOUSEWHEEL,NanoScroll,PANEDOWN,RESIZE,SCROLL,SCROLLBAR,UP,WHEEL,getScrollbarWidth;SCROLLBAR="scrollbar";SCROLL="scroll";MOUSEDOWN="mousedown";MOUSEMOVE="mousemove";MOUSEWHEEL="mousewheel";MOUSEUP="mouseup";RESIZE="resize";DRAG="drag";UP="up";PANEDOWN="panedown";DOMSCROLL="DOMMouseScroll";DOWN="down";WHEEL="wheel";
getScrollbarWidth=function(){var b,d,a;d=document.createElement("div");d.style.position="absolute";d.style.width="100px";d.style.height="100px";d.style.overflow="scroll";document.body.appendChild(d);b=d.offsetWidth;a=d.scrollWidth;document.body.removeChild(d);return b-a};
NanoScroll=function(){function b(a,c){this.nearBottomCallback=c;this.el=a;this.content=a.getElementsByClassName("content")[0];this.slider=a.getElementsByClassName("slider")[0];this.pane=a.getElementsByClassName("pane")[0];this.scrollW=getScrollbarWidth();this.createEvents();this.addEvents();this.reset();var b=this;this.clearScrollTimer=window.setInterval(function(){b.hideScroller()},1E3)}b.prototype.createEvents=function(){var a=this;this.events={down:function(c){a.isDrag=!0;a.offsetY=c.clientY-a.slider.offsetTop;
a.pane.classList.add("active");window.addEventListener(MOUSEMOVE,a.events[DRAG],!1);window.addEventListener(MOUSEUP,a.events[UP],!1);return!1},drag:function(c){a.sliderY=c.clientY-(a.el.offsetTop-40)-a.offsetY;a.scroll();return!1},up:function(){a.isDrag=!1;a.pane.classList.remove("active");window.removeEventListener(MOUSEMOVE,a.events[DRAG],!1);window.removeEventListener(MOUSEUP,a.events[UP],!1);return!1},resize:function(){a.reset()},panedown:function(c){a.isDrag||(a.sliderY=c.offsetY-0.5*a.sliderH,
a.scroll())},scroll:function(){var c;!0!==a.isDrag&&(c=a.content,c=c.scrollTop/(c.scrollHeight-c.clientHeight)*(a.paneH-a.sliderH),a.slider.style.top=c+"px",a.showScroller(),a.testScroll())},wheel:function(c){a.sliderY+=-c.wheelDeltaY||-c.delta;a.scroll();return!1}}};var d;b.prototype.showScroller=function(){var a=this;d=new Date;window.setTimeout(function(){a.hideScroller()},800);this.pane.classList.add("show")};b.prototype.hideScroller=function(){var a=new Date;d&&d.getTime()+800<a.getTime()&&this.pane.classList.remove("show")};
b.prototype.addEvents=function(){window.addEventListener(RESIZE,this.events[RESIZE],!1);this.slider.addEventListener(MOUSEDOWN,this.events[DOWN],!1);this.pane.addEventListener(MOUSEUP,this.events[PANEDOWN],!1);this.content.addEventListener(SCROLL,this.events[SCROLL],!1)};b.prototype.removeEvents=function(){window.removeEventListener(RESIZE,this.events[RESIZE],!1);this.slider.removeEventListener(MOUSEDOWN,this.events[DOWN],!1);this.pane.removeEventListener(MOUSEUP,this.events[PANEDOWN],!1);this.content.removeEventListener(SCROLL,
this.events[SCROLL],!1)};b.prototype.reset=function(){var a;!0===this.isDead&&(this.isDead=!1,this.pane.show(),this.addEvents());a=this.content;this.contentH=a.scrollHeight+this.scrollW;this.paneH=a.clientHeight-4;this.sliderH=this.paneH/this.contentH*this.paneH;this.sliderH=Math.round(this.sliderH);this.scrollH=this.paneH-this.sliderH;this.slider.style.height=this.sliderH+"px";this.diffH=a.scrollHeight-a.clientHeight;this.pane.style.display=this.paneH>=this.content.scrollHeight-4?"none":"block"};
b.prototype.scroll=function(){var a;this.sliderY=Math.max(0,this.sliderY);this.sliderY=Math.min(this.scrollH,this.sliderY);a=this.paneH-this.contentH+this.scrollW;a=a*this.sliderY/this.scrollH;this.content.scrollTop=-a;this.testScroll();return this.slider.style.top=this.sliderY+"px"};b.prototype.scrollBottom=function(a){var c,b;c=this.diffH;b=this.content[0].scrollTop;this.reset();b<c&&0!==b||(this.content.scrollTop=this.contentH-this.content.height()-a,this.testScroll())};b.prototype.scrollTop=function(a){this.reset();
this.content.scrollTop=a+0};b.prototype.stop=function(){this.isDead=!0;this.removeEvents();this.pane.hide()};b.prototype.testScroll=function(){this.content.scrollTop+this.content.clientHeight>this.content.scrollHeight-10&&this.nearBottomCallback()};return b}();var scrollbar;function nanoScroller(b,d){var a;void 0===a&&(a=new NanoScroll(b,d));return a};
